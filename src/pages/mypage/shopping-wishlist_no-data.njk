{% extends 'default.njk' %}

{% block content %}
<main class="shell-main shell-main--mypage">
  <div class="main-header" style="background-image:url(/cmsstatic/asset/images/myapge-visual.jpg);">
    <div class="main-container">
      <h2 class="main-header__title">ë§ˆì´í˜ì´ì§€</h2>
      <div class="main-header__my-info">
        <a href="#" class="my-info__membership grade">
          <span class="grade__icon"><img src="/cmsstatic/asset/images/badge/red.png" alt="Red"></span>
          <span class="grade__name"><span>RED</span> íšŒì›</span>
          <!--
          <span class="grade__icon"><img src="/cmsstatic/asset/images/badge/s-platinum.png" alt="S-Platinum"></span>
          <span class="grade__icon"><img src="/cmsstatic/asset/images/badge/platinum.png" alt="platinum"></span>
          <span class="grade__icon"><img src="/cmsstatic/asset/images/badge/gold.png" alt="Gold"></span>
          <span class="grade__icon"><img src="/cmsstatic/asset/images/badge/silver.png" alt="Sliver"></span>
          <span class="grade__icon"><img src="/cmsstatic/asset/images/badge/black.png" alt="Black"></span>
          <span class="grade__icon"><img src="/cmsstatic/asset/images/badge/purple.png" alt="Purple"></span>
          <span class="grade__icon"><img src="/cmsstatic/asset/images/badge/red.png" alt="Red"></span>
          -->
        </a>
        <div class="my-info__message">
          <p class="message__title">í•´ì§€ìˆ˜ë‹˜, ì•ˆë…•í•˜ì„¸ìš”. ğŸ¥°</p>
          <p class="message__content">ì´ë²ˆ ì£¼ëŠ” ë´„ ì‹ ìƒì´ ë§ì•„ìš”.</p>
        </div>
        <ul class="my-info__asset">
          <li class="asset__item">
            <a href="#" class="asset__value asset__value--coupon">3ì¥</a>
          </li>
          <li class="asset__item">
            <a href="#" class="asset__value asset__value--mileage">20,000M</a>
          </li>
        </ul>
        <a href="#" class="my-info__more">ë‚´ ì •ë³´ ìˆ˜ì •</a>
      </div>
    </div>
  </div>
  <div class="main-content">
    <div class="main-container main-content__body">
      <div class="main-content__main main-content__main--shpping">
        <div class="main-content__header main-content__header--sub">
          <h3 class="main-content__title">ìœ„ì‹œë¦¬ìŠ¤íŠ¸</h3>
          <button type="button" class="button main-content__btn-back">
            <i class="sprite-icon sprite-common sprite-common-back">ë’¤ë¡œê°€ê¸°</i>
          </button>
        </div>
        <div class="mypage-shpping-container">
          <div class="my-product-container">
            <div class="no-data">
              <i class="sprite-common sprite-common-no-wish"></i>
              <p class="message">ê´€ì‹¬ìˆëŠ” ìƒí’ˆì„ ë‹´ì•„ë³´ì„¸ìš”.<br>ìœ„ì‹œë¦¬ìŠ¤íŠ¸ ë‚´ì—ì„œ ë¹ ë¥´ê²Œ ìƒí’ˆì„ ì°¾ì•„ë³¼ ìˆ˜ ìˆì–´ìš”.</p>
            </div>

            <!-- ìƒí’ˆ ì „ì‹œìœ í˜• ë³€ê²½ -->
            <!-- // ìƒí’ˆ ì „ì‹œìœ í˜• ë³€ê²½ -->

            <!-- ìƒí’ˆ -->
            <!-- // ìƒí’ˆ -->
          </div>


        </div>
      </div>

      <div class="main-content__aside">
        <!-- ë©”ë‰´ -->
        <ul class="sidebar-menu">
          <li class="sidebar-menu__item menu">
            <p class="menu__title">ë‚˜ì˜ ì‡¼í•‘ ë‚´ì—­</p>
            <ul class="menu__list">
              <li class="menu__item">
                <li class="menu__item">
                <a href="#"><i class="sprite-mypage-listsearch-small"></i>ì£¼ë¬¸/ë°°ì†¡ ì¡°íšŒ</a>
              </li>
              <li class="menu__item">
                <a href="#"><i class="sprite-mypage-claim-small"></i>ì·¨ì†Œ/êµí™˜/ë°˜í’ˆ</a>
              </li>
            </ul>
          </li>
          <li class="sidebar-menu__item menu">
            <p class="menu__title">ë‚˜ë§Œì˜ í˜œíƒ</p>
            <ul class="menu__list">
              <li class="menu__item">
                <a href="#"><i class="sprite-mypage-coupon-small"></i>ì¿ í°</a>
              </li>
              <li class="menu__item">
                <a href="#"><i class="sprite-mypage-mileage-small"></i>ë§ˆì¼ë¦¬ì§€</a>
              </li>
              <li class="menu__item">
                <a href="#"><i class="sprite-mypage-badgebook-small"></i>ë‚˜ì˜ ë±ƒì§€</a>
              </li>
            </ul>
          </li>
          <li class="sidebar-menu__item menu">
            <p class="menu__title">ë‚˜ì˜ ì‡¼í•‘ íƒœê·¸</p>
            <ul class="menu__list">
              <li class="menu__item active">
                <a href="#"><i class="sprite-mypage-wish-small"></i>ìœ„ì‹œ ë¦¬ìŠ¤íŠ¸</a>
              </li>
              <li class="menu__item">
                <a href="#"><i class="sprite-mypage-recent-small"></i>ìµœê·¼ ë³¸ ìƒí’ˆ</a>
              </li>
              <li class="menu__item">
                <a href="#"><i class="sprite-mypage-review-small"></i>ë‚´ ìƒí’ˆí‰</a>
              </li>
              <li class="menu__item">
                <a href="#"><i class="sprite-mypage-push-small"></i>ì¬ì…ê³  ì•Œë¦¼ ë‚´ì—­</a>
              </li>
              <li class="menu__item">
                <a href="#"><i class="sprite-mypage-qna-small"></i>ë‚´ ë¬¸ì˜ ë‚´ì—­</a>
              </li>
            </ul>
          </li>
          <li class="sidebar-menu__item menu">
            <p class="menu__title">ë‚˜ì˜ ì •ë³´</p>
            <ul class="menu__list">
              <li class="menu__item">
                <a href="#"><i class="sprite-mypage-benefit-small"></i>íšŒì› í˜œíƒ</a>
              </li>
              <li class="menu__item">
                <a href="#"><i class="sprite-mypage-myinfo-small"></i>ë‚´ ì •ë³´ ë³€ê²½ / íšŒì› íƒˆí‡´</a>
              </li>
              <li class="menu__item">
                <a href="#"><i class="sprite-mypage-address-small"></i>ë°°ì†¡ì§€ ê´€ë¦¬</a>
              </li>
            </ul>
          </li>
        </ul>
        <!-- // ë©”ë‰´ -->
      </div>
    </div>
  </div>
</main>
{% endblock %}

{% block modal %}
  {% include "modal/member/find-password.njk" %}
{% endblock modal %}

{% block css %}
<link rel="stylesheet" href="/asset/css/mypage.css" />
{% endblock css %}

{% block js %}
<script src="/asset/js/mypage.js"></script>
<script>
var productList = [];
function swierInit(element, isLoop) {
  var instance = $(element).data('swiper');
  if(instance) {
    instance.update();
    return false;
  }

  var swiper = new Swiper(element, {
    loop: isLoop,
    pagination: {
      el: '.swiper-pagination'
    },
    navigation: {
      nextEl: '.swiper-button-next',
      prevEl: '.swiper-button-prev'
    },
    on: {
      init: function () {
        if(isLoop){
          swiperPagination(this);
        }
      },
      slideChange: function () {
        if(isLoop){
          swiperPagination(this);
        }
      },
      resize: function(){
        // throttle
        this.update();
      },
      update: function(){
        if(isLoop){
          swiperPagination(this);
        }
      }
    }
  });

  if(isLoop){
    $(element).addClass('is-active');
  } else {
    swiper.detachEvents();
  }
  $(element).data('swiper', swiper);
  productList.push(swiper);
}

function swiperPagination(instance) {
  var swiper = instance;
  var slides = swiper.slides;
  var length = swiper.params.loop
    ? slides.length - 2
    : slides.length;
  var percent = (swiper.realIndex + 1) / length * 100;
  window.setTimeout(function () {
    $(swiper.pagination.el)
      .parent()
      .find('.swiper-progress__fill')
      .width(percent + '%');
  }, 10)
}
$(function(){
  // ìƒí’ˆ ìŠ¬ë¼ì´ë”
  $('.product-list-container .swiper-container').each(function () {
    var $element = $(this);
    // ë™ì ìœ¼ë¡œ ì¶”ê°€ë˜ëŠ” ìƒí’ˆë„ ì•„ë˜ì™€ ê°™ì´ ì¶”ê°€í•„ìš”í•¨
    swierInit($element[0], $element.find('.swiper-slide').length > 1);
  });
  // ìƒí’ˆ ì‚¬ì´ì¦ˆ ë³€ê²½
  var sliderElement = document.querySelector('#thumbnailSlider');
  rangesliderJs.create(
    sliderElement, {
      min: 0,
      max: 4,
      value: 2,
      step: 0.1,
      // onInit: (value, percent, position) => {},
      onSlide: (value, percent, position) => {
        var sliderHandle = sliderElement['rangeslider-js'];
        var oldType = $('#productList').attr('data-size') || 'm';
        var type;
        if(value <= 0.5 ) {
          type = 'xs';
        } else if (value > 0.5 && value <= 1.5) {
          type = 's';
        } else if (value > 3) {
          type = 'l';
        } else {
          type = 'm';
        }

        if(oldType !== type) {
          $('.product-list-container .product-list').each(function(){
            $(this).attr('data-size', type);
          });
          // console.log('ìƒí’ˆ View : ', oldType, ' to ', type);
          for(var i=0; i < productList.length; i++){
            // ìƒí’ˆ Swiper layout update
            productList[i].update();
          }
          $('.product-list-container .product-list').each(function(){
            $(this)
              .css({opacity: 0 })
              .animate({
                opacity: 1
              }, {
                duration: 100,
                complete: function(){
                  AOS.refresh();
                }
              });
          });
        }
      },
      onSlideEnd: (value, percent, position) => {
        var sliderHandle = sliderElement['rangeslider-js'];
        var newValue;
        $(sliderHandle.handle).addClass('is-touch-end');

        if(value <= 0.5 ) {
          newValue = 0;
        } else if (value > 0.5 && value <= 1.5) {
          newValue = 1;
        } else if (value > 3) {
          newValue = 4;
        } else {
          newValue = 2;
        }
        sliderHandle.update({ value: newValue });
      }
    }
  );
})
</script>
{% endblock js %}